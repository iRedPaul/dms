{"ast":null,"code":"import React,{useState,useContext,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import{Container,Box,Typography,TextField,Button,Paper,Alert,CircularProgress,InputAdornment,IconButton,useTheme,useMediaQuery}from'@mui/material';import{Visibility as VisibilityIcon,VisibilityOff as VisibilityOffIcon,Login as LoginIcon}from'@mui/icons-material';import{AuthContext}from'../../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('sm'));const navigate=useNavigate();const location=useLocation();const{login,isAuthenticated,loading}=useContext(AuthContext);const[formData,setFormData]=useState({username:'',password:''});const[showPassword,setShowPassword]=useState(false);const[error,setError]=useState(null);const[isSubmitting,setIsSubmitting]=useState(false);// Wenn bereits authentifiziert, zur ursprünglichen Seite oder zum Dashboard weiterleiten\nuseEffect(()=>{if(isAuthenticated&&!loading){var _location$state,_location$state$from;const redirectTo=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/';navigate(redirectTo);}},[isAuthenticated,loading,navigate,location]);const handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleTogglePasswordVisibility=()=>{setShowPassword(!showPassword);};const handleSubmit=async e=>{e.preventDefault();setIsSubmitting(true);setError(null);const{username,password}=formData;if(!username||!password){setError('Bitte geben Sie Benutzername und Passwort ein.');setIsSubmitting(false);return;}try{const result=await login(username,password);if(!result.success){setError(result.message);}}catch(err){setError('Ein unerwarteter Fehler ist aufgetreten.');console.error(err);}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"xs\",children:/*#__PURE__*/_jsxs(Box,{sx:{height:'100vh',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center'},children:[/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4,display:'flex',flexDirection:'column',alignItems:'center',width:'100%',borderRadius:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,color:\"primary\",sx:{fontWeight:'bold'},children:\"DMS Login\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:3,textAlign:'center'},children:\"Melden Sie sich an, um auf das Dokumentenmanagementsystem zuzugreifen\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3,width:'100%'},children:error}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,sx:{width:'100%'},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Benutzername\",name:\"username\",autoComplete:\"username\",autoFocus:true,value:formData.username,onChange:handleChange,disabled:isSubmitting,sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Passwort\",type:showPassword?'text':'password',id:\"password\",autoComplete:\"current-password\",value:formData.password,onChange:handleChange,disabled:isSubmitting,InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"Toggle password visibility\",onClick:handleTogglePasswordVisibility,edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(VisibilityOffIcon,{}):/*#__PURE__*/_jsx(VisibilityIcon,{})})})},sx:{mb:3}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",disabled:isSubmitting,size:\"large\",startIcon:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(LoginIcon,{}),sx:{py:1.5},children:isSubmitting?'Anmeldung...':'Anmelden'})]})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{mt:4},children:[\"\\xA9 \",new Date().getFullYear(),\" DMS System\"]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useContext","useEffect","useNavigate","useLocation","Container","Box","Typography","TextField","Button","Paper","Alert","CircularProgress","InputAdornment","IconButton","useTheme","useMediaQuery","Visibility","VisibilityIcon","VisibilityOff","VisibilityOffIcon","Login","LoginIcon","AuthContext","jsx","_jsx","jsxs","_jsxs","theme","isMobile","breakpoints","down","navigate","location","login","isAuthenticated","loading","formData","setFormData","username","password","showPassword","setShowPassword","error","setError","isSubmitting","setIsSubmitting","_location$state","_location$state$from","redirectTo","state","from","pathname","handleChange","e","name","value","target","handleTogglePasswordVisibility","handleSubmit","preventDefault","result","success","message","err","console","component","maxWidth","children","sx","height","display","flexDirection","alignItems","justifyContent","elevation","p","width","borderRadius","variant","gutterBottom","color","fontWeight","mb","textAlign","severity","onSubmit","noValidate","margin","required","fullWidth","id","label","autoComplete","autoFocus","onChange","disabled","type","InputProps","endAdornment","position","onClick","edge","size","startIcon","py","mt","Date","getFullYear"],"sources":["/app/src/components/Auth/Login.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport {\n  Container,\n  Box,\n  Typography,\n  TextField,\n  Button,\n  Paper,\n  Alert,\n  CircularProgress,\n  InputAdornment,\n  IconButton,\n  useTheme,\n  useMediaQuery\n} from '@mui/material';\nimport {\n  Visibility as VisibilityIcon,\n  VisibilityOff as VisibilityOffIcon,\n  Login as LoginIcon\n} from '@mui/icons-material';\nimport { AuthContext } from '../../context/AuthContext';\n\nconst Login = () => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { login, isAuthenticated, loading } = useContext(AuthContext);\n  \n  const [formData, setFormData] = useState({\n    username: '',\n    password: ''\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Wenn bereits authentifiziert, zur ursprünglichen Seite oder zum Dashboard weiterleiten\n  useEffect(() => {\n    if (isAuthenticated && !loading) {\n      const redirectTo = location.state?.from?.pathname || '/';\n      navigate(redirectTo);\n    }\n  }, [isAuthenticated, loading, navigate, location]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n\n  const handleTogglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setError(null);\n\n    const { username, password } = formData;\n\n    if (!username || !password) {\n      setError('Bitte geben Sie Benutzername und Passwort ein.');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      const result = await login(username, password);\n      \n      if (!result.success) {\n        setError(result.message);\n      }\n    } catch (err) {\n      setError('Ein unerwarteter Fehler ist aufgetreten.');\n      console.error(err);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <Box\n        sx={{\n          height: '100vh',\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          justifyContent: 'center'\n        }}\n      >\n        <Paper\n          elevation={3}\n          sx={{\n            p: 4,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            width: '100%',\n            borderRadius: 2\n          }}\n        >\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom color=\"primary\" sx={{ fontWeight: 'bold' }}>\n            DMS Login\n          </Typography>\n          \n          <Typography variant=\"body1\" sx={{ mb: 3, textAlign: 'center' }}>\n            Melden Sie sich an, um auf das Dokumentenmanagementsystem zuzugreifen\n          </Typography>\n\n          {error && (\n            <Alert severity=\"error\" sx={{ mb: 3, width: '100%' }}>\n              {error}\n            </Alert>\n          )}\n\n          <Box component=\"form\" onSubmit={handleSubmit} noValidate sx={{ width: '100%' }}>\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"username\"\n              label=\"Benutzername\"\n              name=\"username\"\n              autoComplete=\"username\"\n              autoFocus\n              value={formData.username}\n              onChange={handleChange}\n              disabled={isSubmitting}\n              sx={{ mb: 2 }}\n            />\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Passwort\"\n              type={showPassword ? 'text' : 'password'}\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={formData.password}\n              onChange={handleChange}\n              disabled={isSubmitting}\n              InputProps={{\n                endAdornment: (\n                  <InputAdornment position=\"end\">\n                    <IconButton\n                      aria-label=\"Toggle password visibility\"\n                      onClick={handleTogglePasswordVisibility}\n                      edge=\"end\"\n                    >\n                      {showPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}\n                    </IconButton>\n                  </InputAdornment>\n                )\n              }}\n              sx={{ mb: 3 }}\n            />\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              disabled={isSubmitting}\n              size=\"large\"\n              startIcon={isSubmitting ? <CircularProgress size={20} /> : <LoginIcon />}\n              sx={{ py: 1.5 }}\n            >\n              {isSubmitting ? 'Anmeldung...' : 'Anmelden'}\n            </Button>\n          </Box>\n        </Paper>\n        \n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 4 }}>\n          © {new Date().getFullYear()} DMS System\n        </Typography>\n      </Box>\n    </Container>\n  );\n};\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}